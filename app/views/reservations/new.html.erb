<!--Written by: Akaljot, Jessica, Jhoong -->
<div class='content'>
   <div class='container'>
      <div id='calendar'></div>
      <!-- Button trigger modal -->
         <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
           Delete all reservations
         </button>

         <!-- Modal -->
         <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
           <div class="modal-dialog">
             <div class="modal-content">
               <div class="modal-header">
                 <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                 <h4 class="modal-title" id="myModalLabel">Delete event</h4>
               </div>
               <div class="modal-body">
                 Are you sure you want to delete it?
               </div>
               <div class="modal-footer">
                 <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                 <button type="button" id="deleteEvent" class="btn btn-primary">Delete</button>
               </div>
             </div>
           </div>
         </div> <!-- end of modal-->
      </div>
   </div>
</div>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js"></script>
<script type="text/javascript">
   $(document).ready(function() {
      var today = moment()
      var today_date = today.format('YYYY-MM-DD');
      var year_from_today_date = today.add(1, "years").format('YYYY-MM-DD');
      var date = new Date();
      var d = date.getDate();
      var m = date.getMonth();
      var y = date.getFullYear();
      var eventid = 0
      $('#calendar').fullCalendar({
        // put your options and callbacks here
         allDayDefault: true,
         selectable: true,
         selectHelper: true,
         eventBackgroundColor: 'grey',
         eventBorderColor: 'grey',
         select: function(start, end) {
            var start_date = start.format('YYYY-MM-DD');
            var end_date = end.format('YYYY-MM-DD');
            if (start_date < today_date) {
               alert("Can't select days in the past");
            }
            else if (end_date >= year_from_today_date){
               alert("Can't select days a year in the future");
            }
            else {
               var eventData;
               eventData = {
                  id: eventid,
                  start: start,
                  end: end,
                  color: 'green'
               };
               $('#calendar').fullCalendar('renderEvent', eventData, true); // stick? = true
               eventid += 1
            }
            $('#calendar').fullCalendar('unselect');
         },
         editable: true,
         events: [
            {
               id: 7,
               title: 'Keepo',
               start: new Date(y, m, d-5),
               end: new Date(y, m, d-2),
            }
         ],
         eventClick: function(calEvent, jsEvent, view) {
            //id=calEvent.id;
            //$('#myModal').modal('show');
            if (confirm('Are you sure you want to delete this event?')){
              $('#calendar').fullCalendar('removeEvents', calEvent._id);
            }
            else{
              
            }
         },
      });
      $("#deleteEvent").on("click", function(e) {
         deleteEvent(e.id);
      });
      function deleteEvent(id){
         $('#calendar').fullCalendar('removeEvents', id);
      }
   })

</script>

